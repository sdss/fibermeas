<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
  border: 1px solid black;
}
</style>
</head>

{% block body %}
<h1>Summary: {{ imgName }}</h1>

<table style="width:400px">
  <tr>
    <td>robot ID</td>
    <td>{{ robotID }}</td>
  </tr>
  <tr>
    <td>robo tail ID</td>
    <td>{{ roboTailID }}</td>
  </tr>
  <tr>
    <td>measurement date</td>
    <td>{{ measDate }}</td>
  </tr>
  <tr>
    <td>image scale (um/px)</td>
    <td>{{ imgScale }}</td>
  </tr>
  <tr>
    <td>ccd rotation (deg)</td>
    <td>{{ "%.2f" | format(ccdRot) }}</td>
  </tr>
  <tr>
    <td>beta arm width (mm) </td>
    <td>{{ "%.3f" | format(betaArmWidthMM) }}</td>
  </tr>
  <tr>
    <td>fibermeas version</td>
    <td>{{ version }}</td>
  </tr>
</table>

<br>

<h4> In the table below, xy are in beta arm frame.  The origin is the location of beta axis, which is inferred by fitting the beta arm outline shape and applying solid model specificications.  +x axis lies along midline of beta arm and increases toward fibers.
This is roughly a 90 deg rotation from the CCD xy frame.</h4>
<table style="width:800px">
  <tr>
    <th>Fiber</th>
    <th> diameter (px) </th>
    <th> eccentricity </th>
    <th>x (mm)</th>
    <th>y (mm)</th>
    <th>x err (um)</th>
    <th>y err (um)</th>
    <th>err mag (um)</th>
  </tr>
  <tr>
    <td>Metrology</td>
    <td>{{ "%.1f" | format(metrologyDiaCCD) }} </td>
    <td>{{ "%.2f" | format (metrologyEccentricity) }} </td>
    <td>{{ "%.4f"| format(metrologyXYmm[0]) }}</td>
    <td>{{ "%.4f"| format(metrologyXYmm[1]) }}</td>
    <td>{{ "%.1f"| format(metrologyErrUm[0]) }}</td>
    <td>{{ "%.1f"| format(metrologyErrUm[1]) }}</td>
    <td>{{ "%.1f"| format(metrologyErrMagUm) }}</td>
   </tr>
  <tr>
    <td>Boss</td>
    <td>{{ "%.1f" | format(bossDiaCCD) }} </td>
    <td>{{ "%.2f" | format (bossEccentricity) }} </td>
    <td>{{ "%.4f"| format(bossXYmm[0]) }}</td>
    <td>{{ "%.4f"| format(bossXYmm[1]) }}</td>
    <td>{{ "%.1f"| format(bossErrUm[0]) }}</td>
    <td>{{ "%.1f"| format(bossErrUm[1]) }}</td>
    <td>{{ "%.1f"| format(bossErrMagUm) }}</td>
   </tr>
  <tr>
    <td>Apogee</td>
    <td>{{ "%.1f" | format(apogeeDiaCCD) }} </td>
    <td>{{ "%.2f" | format (apogeeEccentricity) }} </td>
    <td>{{ "%.4f"| format(apogeeXYmm[0]) }}</td>
    <td>{{ "%.4f"| format(apogeeXYmm[1]) }}</td>
    <td>{{ "%.1f"| format(apogeeErrUm[0]) }}</td>
    <td>{{ "%.1f"| format(apogeeErrUm[1]) }}</td>
    <td>{{ "%.1f"| format(apogeeErrMagUm) }}</td>
   </tr>
</table>
<br>
<h4> Results of grid evaulation on beta arm width and CCD rotation.  Best fit is where correlation is maximized.</h4>
<img src="{{ tempEvalFigName }}" width="1200">

<br>
<h4>  White dashes define the beta arm coordinate frame.  White circle
indicates the expected center of the equalateral fiber triangle in beta reference frame.
Open circles indicate expected center of fibers in beta reference frame.  X's indicate
the found center of the fibers.</h4>
<img src="{{ fullFigName }}" width="1200">

<br>
<img src="{{ zoomFigName }}" width="1200">
{% endblock %}
</html>